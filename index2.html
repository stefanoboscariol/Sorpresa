<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TANTI AUGURI FLAâœ¨</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #ff9a9e, #fad0c4, #fad0c4, #fbc2eb);
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      color: #333;
      overflow: hidden;
    }

    .card {
      background: #fff8f0;
      padding: 2.5rem 2rem;
      border-radius: 24px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
      max-width: 420px;
      width: 90%;
      text-align: center;
      animation: pop 0.6s ease-out;
    }

    @keyframes pop {
      from { transform: scale(0.85); opacity: 0; }
      to   { transform: scale(1); opacity: 1; }
    }

    h1 { font-size: 1.9rem; margin-bottom: 1rem; color: #ff6a88; }
    p  { font-size: 1.05rem; line-height: 1.5; margin-bottom: 1rem; }

    button {
      background: linear-gradient(135deg, #6a11cb, #2575fc);
      border: none;
      color: white;
      font-size: 1rem;
      padding: 0.7rem 1.4rem;
      border-radius: 999px;
      cursor: pointer;
      box-shadow: 0 8px 20px rgba(106,17,203,0.4);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
      margin-top: 0.5rem;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 26px rgba(106,17,203,0.5);
    }

    .hidden { display: none; }
    .choices button {
      margin: 0.35rem;
      padding: 0.6rem 1.1rem;
      font-size: 0.95rem;
    }

    .dots { position: relative; height: 180px; margin: 1rem 0; }
    .dot { width: 22px; height: 22px; background: #6a11cb; border-radius: 50%; position: absolute; cursor: pointer; }
    canvas { position: absolute; top:0; left:0; }

    .heart { position: absolute; bottom: -20px; font-size: 20px; animation: floatUp 5s linear infinite; opacity: 0.7; }
    @keyframes floatUp { from { transform: translateY(0) scale(1); opacity: 0.7; } to { transform: translateY(-110vh) scale(1.6); opacity: 0; } }

    /* Tap rapido grid */
    #tapGrid {
      position: relative;
      width: 100%;
      height: 200px;
      margin: 1rem 0;
      border: 2px dashed #6a11cb;
      border-radius: 16px;
      overflow: hidden;
    }
  </style>
</head>
<body>

  <!-- LIVELLO 1 -->
  <div class="card" id="lvl1">
    <h1>ğŸ‘‹Ciao Flavietta!</h1>
    <p>Questa Ã¨ una piccola sorpresaâ€¦<br>ma per arrivare in fondo dovrai <b>guadagnartela</b> ğŸ˜‰</p>
    <button onclick="goTo('lvl1','lvl2')">Iniziamo ğŸ®</button>
  </div>

  <!-- LIVELLO 2: puntini -->
  <div class="card hidden" id="lvl2">
    <h1>ğŸ§© Livello 1</h1>
    <p>Unisci i puntini <b>in ordine</b> (1 â†’ 2 â†’ 3)</p>
    <p><i>Dai, Ã¨ piÃ¹ facile di un puzzle da bambini ğŸ˜„</i></p>
    <div class="dots">
      <canvas id="lineCanvas" width="360" height="180"></canvas>
      <div class="dot" style="top:120px; left:40px" onclick="hitDot(1)"></div>
      <div class="dot" style="top:40px; left:170px" onclick="hitDot(2)"></div>
      <div class="dot" style="top:120px; left:300px" onclick="hitDot(3)"></div>
    </div>
  </div>

  <!-- LIVELLO 3: matematica -->
  <div class="card hidden" id="lvl3">
    <h1>â• Livello 2</h1>
    <p>Concentrazione massima ğŸ§ </p>
    <p><b>Quanto fa 7 Ã— 6?</b></p>
    <div class="choices">
      <button onclick="mathWrong()">36</button>
      <button onclick="mathRight()">42</button>
      <button onclick="mathWrong()">48</button>
    </div>
    <p id="mathMsg"></p>
  </div>

  <!-- LIVELLO 4: memory semplice -->
  <div class="card hidden" id="lvl4">
    <h1>ğŸƒ Livello 3</h1>
    <p>Scegli il colore corrispondente alla scritta</p>
    <div class="choices">
      <button style="background:#ff6a88;" onclick="memoryRight()">Rosa</button>
      <button style="background:#6a11cb;" onclick="memoryWrong()">Verde</button>
      <button style="background:#2575fc;" onclick="memoryWrong()">Bianco</button>
    </div>
    <p id="memoryMsg"></p>
  </div>

  <!-- LIVELLO 5: tap rapido -->
  <div class="card hidden" id="lvl5">
    <h1>âš¡ Livello 4</h1>
    <p>Tocca tutti i cuori che si accendono! ğŸ’–</p>
    <p><small>Hai <b>10 secondi</b> per trovarne almeno <b>5</b>!</small></p>
    <div class="tap-grid" id="tapGrid"></div>
    <p id="tapScore"></p>
  </div>

  <!-- LIVELLO 6: scelta simpatica -->
  <div class="card hidden" id="lvl6">
    <h1>ğŸ˜ Livello 5</h1>
    <p>Scegli una risposta per continuare:</p>
    <div class="choices">
      <button onclick="choiceWrong()">Non so ğŸ¤”</button>
      <button onclick="choiceRight()">Ovviamente sÃ¬! ğŸ‰</button>
    </div>
  </div>

  <!-- LIVELLO 7: messaggio finale auguri -->
  <div class="card hidden" id="lvl7">
    <h1>ğŸ‰ Auguri!</h1>
    <p>Hai superato tutti i livelli! ğŸ†<br>Sei fantastica e meriti tutto il meglio ğŸŒŸğŸ’–</p>
    <button onclick="spawnHearts(50)">Pioggia di cuori ğŸ’•</button>
  </div>

  <script>
    /* Navigazione */
    function goTo(from, to) {
      document.getElementById(from).classList.add('hidden');
      document.getElementById(to).classList.remove('hidden');
    }

    /* Puntini */
    let currentDot = 1;
    const canvas = document.getElementById('lineCanvas');
    const ctx = canvas.getContext('2d');
    let lastPos = null;
    function hitDot(n) {
      if (n !== currentDot) return;
      const dot = event.target;
      const rect = dot.getBoundingClientRect();
      const parent = dot.parentElement.getBoundingClientRect();
      const x = rect.left - parent.left + 11;
      const y = rect.top - parent.top + 11;
      if (lastPos) { 
        ctx.beginPath();
        ctx.moveTo(lastPos.x,lastPos.y);
        ctx.lineTo(x,y);
        ctx.strokeStyle='#ff6a88';
        ctx.lineWidth=4;
        ctx.stroke(); 
      }
      lastPos = {x,y};
      currentDot++;
      if(currentDot===4){setTimeout(()=>goTo('lvl2','lvl3'),600);}
    }

    /* Matematica */
    function mathWrong(){ document.getElementById('mathMsg').textContent='Mhâ€¦ riprova, so che puoi ğŸ˜'; }
    function mathRight(){ 
      document.getElementById('mathMsg').textContent='Perfetto! Sapevo che ce lâ€™avevi ğŸ˜'; 
      setTimeout(()=>goTo('lvl3','lvl4'),900); 
    }

    /* Memory */
    function memoryWrong(){ document.getElementById('memoryMsg').textContent='Oops! Ricorda meglio ğŸ˜…'; }
    function memoryRight(){ 
      document.getElementById('memoryMsg').textContent='Bravo! ğŸ’ª'; 
      setTimeout(()=>goTo('lvl4','lvl5'),800); 
    }

    /* Tap rapido (lvl5) */
    function startTapGame() {
      const grid = document.getElementById('tapGrid');
      const scoreDisplay = document.getElementById('tapScore');
      grid.innerHTML = '';
      scoreDisplay.textContent = '';
      let heartsClicked = 0;
      const totalHearts = 10;

      for(let i=0;i<totalHearts;i++){
        const heart = document.createElement('button');
        heart.textContent = 'ğŸ’–';
        heart.style.position = 'absolute';
        heart.style.top = Math.random()*160 + 'px';
        heart.style.left = Math.random()*320 + 'px';
        heart.style.fontSize = '2rem';
        heart.style.border = 'none';
        heart.style.background = 'transparent';
        heart.style.cursor = 'pointer';
        heart.addEventListener('click',()=>{
          heartsClicked++;
          heart.remove();
          scoreDisplay.textContent = `Cuori cliccati: ${heartsClicked}`;
        });
        grid.appendChild(heart);
      }

      setTimeout(()=>{
        scoreDisplay.textContent = `Hai cliccato ${heartsClicked} cuori!`;
        if(heartsClicked >=5){
          scoreDisplay.textContent += ' ğŸ‰ Bene! Passiamo al prossimo livello.';
          setTimeout(()=>goTo('lvl5','lvl6'),1000);
        } else {
          scoreDisplay.textContent += ' ğŸ˜… Prova ancora!';
          setTimeout(()=>startTapGame(),1500);
        }
      },10000);
    }

    /* Lancia il gioco quando lvl5 diventa visibile */
    const lvl5 = document.getElementById('lvl5');
    const observer = new MutationObserver(mutations=>{
      mutations.forEach(m=>{
        if(m.target.id==='lvl5' && !lvl5.classList.contains('hidden')){
          startTapGame();
        }
      });
    });
    observer.observe(lvl5,{attributes:true,attributeFilter:['class']});

    /* Scelta simpatica */
    function choiceWrong(){ alert('Mhâ€¦ prova ancora ğŸ˜'); }
    function choiceRight(){ goTo('lvl6','lvl7'); spawnHearts(30); }

    /* Cuoricini finale */
    function spawnHearts(n){
      for(let i=0;i<n;i++){
        const heart=document.createElement('div');
        heart.className='heart';
        heart.textContent=['ğŸ’–','ğŸ’•','ğŸ’—','ğŸ’˜','ğŸ’'][Math.floor(Math.random()*5)];
        heart.style.left=Math.random()*100+'vw';
        heart.style.animationDuration=(3+Math.random()*3)+'s';
        document.body.appendChild(heart);
        setTimeout(()=>heart.remove(),6000);
      }
    }
  </script>

</body>
</html>


</body>
</html>
